<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../../img/favicon.ico">
  <title>Rust - DOC.TON.DEV</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Rust";
    var mkdocs_page_input_path = "SDK\\Client Libraries\\Using Libraries\\Rust.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> DOC.TON.DEV</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Compilers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../Compilers/ABI Specification/">ABI Specification</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../Compilers/Intro/">Intro</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../Compilers/Linker CLI/">Linker CLI</a>
                </li>
                <li class="">
                    
    <span class="caption-text">LLVM Compiler</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/LLVM Compiler/1. Compiler Highlights/">1. Compiler Highlights</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/LLVM Compiler/2. C Support Status/">Language Features</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/LLVM Compiler/3. C to TVM Library/">3. C to TVM Library</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/LLVM Compiler/4. Debugging Options/">4. Debugging Options</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Solidity Compiler</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/Solidity Compiler/Reference Guide/">Reference Guide</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/Solidity Compiler/Solidity Support status/">Solidity Support Status</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../../Compilers/Solidity Compiler/Usage/">Usage</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FAQ</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../FAQ/">TON Dev Documentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../FAQ/SDK and Integration/">SDK and Integration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../FAQ/Smart Contracts/">Smart Contracts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../FAQ/Solidity Compiler/">Solidity Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../FAQ/TON and TVM/">TON and TVM</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Misc</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../Misc/Glossary/">The Moonspeak</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">SDK</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../Installation/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../Overview/">Overview</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Auxiliaries</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../Auxiliaries/Getting Logs/">Getting Logs</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Auxiliaries/Installing Ubuntu VM/">Installing Ubuntu VM</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Auxiliaries/TON SDK CLI/">TON SDK CLI</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Auxiliaries/Troubleshooting/">Troubleshooting</a>
                </li>
    </ul>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Client Libraries</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <span class="caption-text">Library Modules</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="../../Library Modules/Contracts/">Contracts</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../../Library Modules/Crypto/">Crypto</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../../Library Modules/Overview/">Overview</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../../Library Modules/Queries/">Queries</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3 current">
                    
    <span class="caption-text">Using Libraries</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="../Node.js/">Node.js</a>
                </li>
                <li class="toctree-l4 current">
                    
    <a class="current" href="./">Rust</a>
    <ul class="subnav">
            
    <li class="toctree-l5"><a href="#creating-a-contract">Creating a contract</a></li>
    

    <li class="toctree-l5"><a href="#creating-an-app">Creating an app</a></li>
    

    <li class="toctree-l5"><a href="#deployment">Deployment</a></li>
    

    <li class="toctree-l5"><a href="#running-a-contract">Running a contract</a></li>
    

    <li class="toctree-l5"><a href="#querying-blockchain">Querying blockchain</a></li>
    

    </ul>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Local node</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../Local node/Local Node/">Local Node</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../../Local node/Node SE Giver/">Node SE Giver</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">TON Labs Testnet</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../../TON Labs Testnet/Testnet Giver/">Testnet Giver</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">TON Blockchain</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../../TON Blockchain/Gal Calculation Basics/">Gas Calculation Basics</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../TON Blockchain/Replay Attack Protection/">Replay Attack Protection</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../TON Blockchain/Storage Fee Calculation/">Storage Fee Calculation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../../TON Blockchain/TVM Error Codes/">TVM Error Codes</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">DOC.TON.DEV</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Using Libraries &raquo;</li>
        
      
        
          <li>Client Libraries &raquo;</li>
        
      
        
          <li>SDK &raquo;</li>
        
      
    
    <li>Rust</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Make sure to create a local folder for all your test projects.</p>
<h2 id="creating-a-contract">Creating a contract</h2>
<ol>
<li>Create the "hello" folder and place the "hello.sol" contract source code into it:</li>
</ol>
<pre><code class="javascript">pragma solidity &gt;=0.5.0 &lt;0.6.0;
contract HelloTON {
    uint32 deployTime;
  constructor() public {
        deployTime = uint32(now);
    }
    function sayHello() public view returns (uint32) {
        return deployTime;
    }
}   
</code></pre>

<ol>
<li>
<p>Call <code>cd hello</code> to navigate to the new folder.</p>
</li>
<li>
<p>Run the TON Labs Solidity compiler:</p>
</li>
</ol>
<pre><code class="shell">tondev sol hello
</code></pre>

<h2 id="creating-an-app">Creating an app</h2>
<p>To get a functional playground, we need blockchain infrastructure for contract testing and debugging. We suggest using our Node SE. </p>
<p>Make sure that you ran a Node SE instant according to the guidelines provided in the <a href="https://docs.ton.dev/86757ecb2/p/28b6ba"><strong>Installation</strong></a> section.</p>
<pre><code class="shell">tondev start            
</code></pre>

<blockquote>
<p><strong>Note:</strong> To create an application according to this procedure, you have to install the newest Rust compiler.</p>
</blockquote>
<ol>
<li>Initialize a Rust application in the hello directory:</li>
</ol>
<pre><code class="shell">~/ton-dev/hello$ cargo init
Created binary (application) package  
</code></pre>

<ol>
<li>Open the newly created <code>Cargo.toml</code> file in your preferred editor and add following line to the <code>[dependencies]</code> section:</li>
</ol>
<pre><code class="shell"> ton-client-rs = &quot;0.11.1&quot;            
</code></pre>

<p>It enables using TON SDK Client package in your <code>hello</code> project.</p>
<ol>
<li>Connect to the local node (Node SE) or to TON Labs testnet. In Rust Client Libraries the <code>TONClient</code> class is used to connect to TON Blockchain nodes that can work with SDK. </li>
</ol>
<p>If you use Node SE, specify <code>new_with_base_url("&lt;http://0.0.0.0&gt;")</code> (local URL).</p>
<blockquote>
<p><strong>Important</strong>: for Windows use <a href="http://127.0.0.1/">http://127.0.0.1/</a> or <a href="http://localhost/">http://localhost</a>.</p>
</blockquote>
<p>If you use the testnet, specify its URL. For test purposes, use Ton Labs test net URL <code>new_with_base_url('&lt;https://testnet.ton.dev&gt;')</code></p>
<p>Go to the <a href="http://main.rs/">main.rs</a> file in hello/src and paste the following code into it:</p>
<pre><code class="shell">extern crate ton_client_rs;

use ton_client_rs::TonClient;

fn main() {
    let ton = TonClient::new_with_base_url(&quot;NodeSE/testnet URL&quot;).expect(&quot;Couldn't create TonClient&quot;);

    println!(&quot;Hello TON Done&quot;);
}
</code></pre>

<ol>
<li>Run the client app from <code>hello</code> directory:</li>
</ol>
<pre><code class="shell">~/ton-dev/hello$ cargo run
        ...
     Running `target\\debug\\hello.exe`
Hello TON Done
~/ton-dev/hello$
</code></pre>

<ol>
<li>Generate keys to sign the deploy transaction using <code>ton_client.crypto.generate_ed25519_keys()</code>function:</li>
</ol>
<pre><code class="rust">extern crate ton_client_rs;

use ton_client_rs::TonClient;

fn main() {
    let ton = TonClient::new_with_base_url(&quot;http://0.0.0.0&quot;).expect(&quot;Couldn't create TonClient&quot;);

    play_with_ton(ton);

    println!(&quot;Hello TON Done&quot;);
}

fn play_with_ton(ton_client: TonClient) {
    let keys = ton_client.crypto.generate_ed25519_keys().expect(&quot;Couldn't create key pair&quot;);
    println!(&quot;Generated keys: {}:{}&quot;, keys.secret, keys.public);
}
</code></pre>

<h2 id="deployment">Deployment</h2>
<p>Before a contract can be deployed, the application needs retrieve: </p>
<p>a compatible TVM code and an ABI structure. </p>
<p>Both elements were obtained at the compilation stage and stored in the <code>hello.tvc</code> and <code>hello.abi.json</code>. </p>
<blockquote>
<p><strong>Tip</strong>: For more details on the ABI, see the <a href="https://docs.ton.dev/86757ecb2/p/70c253">specification</a>.</p>
</blockquote>
<p>Below is the final contract deployment code:</p>
<pre><code class="rust">...

fn play_with_ton(ton_client: TonClient) {
    let keys = ton_client.crypto.generate_ed25519_keys().expect(&quot;Couldn't create key pair&quot;);
    println!(&quot;Generated keys:\n{}\n{}&quot;, keys.secret, keys.public);

    let code = std::fs::read(&quot;hello.tvc&quot;).expect(&quot;Couldn't read code file&quot;);
    let abi = std::fs::read_to_string(&quot;hello.abi.json&quot;).expect(&quot;Couldn't read ABI file&quot;);

    let address = ton_client.contracts.deploy(&amp;abi, &amp;code, &quot;{}&quot;.into(), &amp;keys)
        .expect(&quot;Couldn't deploy contract&quot;);
    println!(&quot;Hello contract was deployed at address: {}&quot;, address);
}

...
</code></pre>

<p>Run the contract to see how it works.</p>
<pre><code class="shell">~/ton-dev/hello$ cargo run
        ...
Running `target\\debug\\hello.exe`
Generated keys:
4236d45d544eccd16b16dea85f8aa201a7edfee06bb7f3e307c0ec02f9cb35ef
02154a29510c8bf29c4b4998e6510f60f224ab566eefaeaa9df22d7a90297b7e
Hello contract was deployed at address: b2a0d72b81d2cfae8bd3e7dc60c20a9f478570b8bea749318ff84fa0bd46d6bd
Hello TON Done
~/ton-dev/hello$   
</code></pre>

<h2 id="running-a-contract">Running a contract</h2>
<ol>
<li>Run your contract; it is also quite simple:</li>
</ol>
<pre><code class="rust">...

fn play_with_ton(ton_client: TonClient) {
    let keys = ton_client.crypto.generate_ed25519_keys().expect(&quot;Couldn't create key pair&quot;);
    println!(&quot;Generated keys:\\n{}\\n{}&quot;, keys.secret, keys.public);

    let code = std::fs::read(&quot;hello.tvc&quot;).expect(&quot;Couldn't read code file&quot;);
    let abi = std::fs::read_to_string(&quot;hello.abi.json&quot;).expect(&quot;Couldn't read ABI file&quot;);

    let address = ton_client.contracts.deploy(&amp;abi, &amp;code, &quot;{}&quot;.into(), &amp;keys)
        .expect(&quot;Couldn't deploy contract&quot;);
    println!(&quot;Hello contract was deployed at address: {}&quot;, address);

    let response = ton_client.contracts.run(&amp;address, &amp;abi, &quot;sayHello&quot;, &quot;{}&quot;.into(), Some(&amp;keys))
        .expect(&quot;Couldn't run contract&quot;);
    println!(&quot;Hello contract was responded to sayHello: {}&quot;, response);
}

...   
</code></pre>

<ol>
<li>Then run the app:</li>
</ol>
<pre><code class="shell">~/ton-dev/hello$ cargo run
    ...
Running `target\\debug\\hello.exe`
Generated keys:
a7571d6041d45c261759caa04f73034396bf1a3aa35f092d5eb83a407f8284f8
1fcf08942290cf190287659f078199b0901e9403d852142f241c630e9b1ca6b3
Hello contract was deployed at address: d8634d6164b02c3a6c1447c505147ca1dde6149ba02b61f9eb21915d62467fde
Hello contract was responded to sayHello: {&quot;value0&quot;:&quot;0x5d78a4c7&quot;}
Hello TON Done
~/ton-dev/hello$ 
</code></pre>

<blockquote>
<p>You can find more information about deploying and running in the <a href="https://docs.ton.dev/86757ecb2/p/891ee9"><strong>Working with contracts</strong></a> section.</p>
</blockquote>
<h2 id="querying-blockchain">Querying blockchain</h2>
<p>Each node server is equipped with a database that tracks the relevant blockchain.</p>
<p>This database is accessible through a GraphQL based protocol for querying blockchain.</p>
<p>The Client library contains the Query Module designed to perform GraphQL queries over a blockchain. The simplest way to query a blockchain is using the following <code>query</code> method:</p>
<pre><code class="javascript">const TRANSACTION_FIELDS: &amp;str = r#&quot;
    id 
    now 
    status
&quot;#;

let query_result = ton.queries.transactions.query(
        &amp;json!({}).to_string(),
        TRANSACTION_FIELDS).unwrap();
println(query_result);
</code></pre>

<p>Then all transactions in the relevant blockchain are displayed (the first 50, to be precise). 50  is the default number used when no limit is specified or when it exceeds 50.</p>
<p>For each transaction, we have three result fields: <strong>id</strong>, <strong>now</strong> and <strong>status</strong>.</p>
<p>We have several options to filter the results:</p>
<pre><code class="javascript">const TRANSACTION_FIELDS: &amp;str = r#&quot;
    id 
    now 
    status
&quot;#;
let query_result = ton.queries.transactions.query(
        &amp;json!({
            &quot;now&quot;: {
                &quot;eq&quot;: 1567601735
            }
        }).to_string(),
        TRANSACTION_FIELDS).unwrap(); 
</code></pre>

<p>The example gets all transactions with <strong>now</strong> equals to 1567601735. </p>
<blockquote>
<p>Find more information about a filtering in the <a href="https://docs.ton.dev/86757ecb2/p/05a847"><strong>Queries</strong></a> section.</p>
</blockquote>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../Local node/Local Node/" class="btn btn-neutral float-right" title="Local Node">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Node.js/" class="btn btn-neutral" title="Node.js"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Node.js/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../../Local node/Local Node/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../../..';</script>
    <script src="../../../../js/theme.js" defer></script>
      <script src="../../../../search/main.js" defer></script>

</body>
</html>
